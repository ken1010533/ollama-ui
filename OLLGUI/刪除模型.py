import requests

ä¼ºæœå™¨ä½å€ = "http://localhost:11434"

def å–å¾—æ¨¡å‹æ¸…å–®():
    try:
        å›æ‡‰ = requests.get(f"{ä¼ºæœå™¨ä½å€}/api/tags")
        å›æ‡‰.raise_for_status()
        çµæœ = å›æ‡‰.json()
        return [æ¨¡å‹["name"] for æ¨¡å‹ in çµæœ.get("models", [])]
    except Exception as e:
        print(f"âŒ ç™¼ç”ŸéŒ¯èª¤ï¼ˆå–å¾—æ¨¡å‹æ¸…å–®ï¼‰: {e}")
        return []

def åˆªé™¤æ¨¡å‹(æ¨¡å‹åç¨±):
    try:
        å›æ‡‰ = requests.delete(f"{ä¼ºæœå™¨ä½å€}/api/delete", json={"name": æ¨¡å‹åç¨±})
        å›æ‡‰.raise_for_status()
    except Exception as e:
        print(f"âŒ åˆªé™¤è«‹æ±‚ç™¼ç”ŸéŒ¯èª¤: {e}")
        return

    # å†æ¬¡æŸ¥è©¢ç¢ºèªæ¨¡å‹æ˜¯å¦é‚„å­˜åœ¨
    æ¨¡å‹æ¸…å–® = å–å¾—æ¨¡å‹æ¸…å–®()
    if æ¨¡å‹åç¨± not in æ¨¡å‹æ¸…å–®:
        print(f"âœ… æ¨¡å‹ã€{æ¨¡å‹åç¨±}ã€åˆªé™¤æˆåŠŸï¼")
    else:
        print(f"âš ï¸ æ¨¡å‹ã€{æ¨¡å‹åç¨±}ã€ä»å­˜åœ¨ï¼Œåˆªé™¤å¯èƒ½å¤±æ•—ã€‚")

def é¸æ“‡ä¸¦åˆªé™¤æ¨¡å‹():
    æ¨¡å‹æ¸…å–® = å–å¾—æ¨¡å‹æ¸…å–®()
    if not æ¨¡å‹æ¸…å–®:
        print("ğŸ“­ æ²’æœ‰å¯ç”¨çš„æ¨¡å‹ã€‚")
        return

    print("ğŸ“¦ ç›®å‰çš„æ¨¡å‹ï¼š")
    for idx, æ¨¡å‹ in enumerate(æ¨¡å‹æ¸…å–®, start=1):
        print(f"{idx}. {æ¨¡å‹}")

    try:
        é¸æ“‡ = int(input("è«‹è¼¸å…¥è¦åˆªé™¤çš„æ¨¡å‹ç·¨è™Ÿï¼š"))
        if 1 <= é¸æ“‡ <= len(æ¨¡å‹æ¸…å–®):
            åˆªé™¤æ¨¡å‹(æ¨¡å‹æ¸…å–®[é¸æ“‡ - 1])
        else:
            print("âš ï¸ ç„¡æ•ˆçš„ç·¨è™Ÿã€‚")
    except ValueError:
        print("âš ï¸ è«‹è¼¸å…¥æœ‰æ•ˆçš„æ•´æ•¸ã€‚")

# ğŸ åŸ·è¡Œ
é¸æ“‡ä¸¦åˆªé™¤æ¨¡å‹()
